# This file was automatically generated by the Dataland CLI via `dataland spec build`.
# It is not intended for manual editing.
moduleId: sendgrid-send-email-example
resources:
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: send-email
    spec:
      scriptSha256Hex: 3fe7a162e0152b69456333ae0a12627a9a66c05d965eb08203858705b85a5459
      env:
        - name: FROM_EMAIL
          value:
            secretKeyRef:
              name: from-email
              key: parameterValue
        - name: FROM_NAME
          value:
            secretKeyRef:
              name: from-name
              key: parameterValue
        - name: SENDGRID_API_KEY
          value:
            secretKeyRef:
              name: sendgrid-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: emails-table
    spec:
      tableName: emails
      columnDescriptors:
        - columnId: send-email-column
          columnName: Send Email
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Send Email\",\n  \"theme\": \"blue\"\n}\n"
        - columnId: sent-column
          columnName: Sent Timestamp
          dataType: string
          nullable: true
        - columnId: email-address-column
          columnName: Email Address
          dataType: string
          nullable: true
        - columnId: subject-column
          columnName: Subject
          dataType: string
          nullable: true
        - columnId: body-column
          columnName: Body
          dataType: string
          nullable: true
      tableAnnotations: {}
      autoMigrate: true
parameterizedResources:
  - resource:
      apiVersion: v1
      kind: Secret
      metadata:
        name: sendgrid-api-key
      type: Opaque
      immutable: false
      stringData:
        parameterValue: ""
    parameters:
      - parameterId: sendgrid-api-key
        replacePath: /stringData/parameterValue
  - resource:
      apiVersion: v1
      kind: Secret
      metadata:
        name: from-email
      type: Opaque
      immutable: false
      stringData:
        parameterValue: ""
    parameters:
      - parameterId: from-email
        replacePath: /stringData/parameterValue
  - resource:
      apiVersion: v1
      kind: Secret
      metadata:
        name: from-name
      type: Opaque
      immutable: false
      stringData:
        parameterValue: ""
    parameters:
      - parameterId: from-name
        replacePath: /stringData/parameterValue
