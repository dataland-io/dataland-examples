# This file was automatically generated by the Dataland CLI via `dataland spec build`.
# It is not intended for manual editing.
moduleId: stripe
resources:
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: fetch-stripe-customers-with-sub
    spec:
      scriptSha256Hex: 7c06ccbc0b1051b2be6f5f4c8477b0e61d2f5bb22ad37800d63b10db5294a694
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: fetch-stripe-customers
    spec:
      scriptSha256Hex: 9b37d29ae2029d05c62137964981111534b8de55f63c1eb7b42498a1d8859bb1
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: fetch-stripe-subscriptions
    spec:
      scriptSha256Hex: ef205090bd045c008ceeba93b97b405cd0b4d063c2a3beb1681b24d31b62a731
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: fetch-stripe-payment-intents
    spec:
      scriptSha256Hex: e479605bf2d63b2f17fe760b97d08c4e3cb8a0d94dba3f8a265bb9bc434e89c0
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: fetch-stripe-invoices
    spec:
      scriptSha256Hex: 3a635240a216865143f283f63058215840c704ce6cbde78d12cd5817d42e564f
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: fetch-stripe-refunds
    spec:
      scriptSha256Hex: d20447b539b4ffbea09b546389eef372702a031d5686e1c6529b2272cbf32aa4
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: post-stripe-subscription-item-quantity-increment
    spec:
      scriptSha256Hex: a5bfaad09f9eac1d489b3313c28f3c3d325ac94607516039b5d1155e80f10f7c
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: post-stripe-subscription-item-quantity-decrement
    spec:
      scriptSha256Hex: 0e95e29e1e84c6e2eccbc3aab04ea1f5a39a7d16c96467b2186c9829ee4bfe5b
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: trigger
    spec:
      tableName: stripe-customers-trigger
      columnDescriptors:
        - columnId: trigger
          columnName: Trigger
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Import Stripe Customers\",\n  \"theme\": \"blue\"\n}\n"
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: stripe-customers
    spec:
      tableName: stripe-customers
      columnDescriptors:
        - columnId: id
          columnName: id
          dataType: string
          nullable: true
        - columnId: phone
          columnName: phone
          dataType: string
          nullable: true
        - columnId: email
          columnName: email
          dataType: string
          nullable: true
        - columnId: object
          columnName: object
          dataType: string
          nullable: true
        - columnId: address
          columnName: address
          dataType: string
          nullable: true
        - columnId: balance
          columnName: balance
          dataType: float64
          nullable: true
        - columnId: created
          columnName: created
          dataType: int64
          nullable: true
        - columnId: currency
          columnName: currency
          dataType: string
          nullable: true
        - columnId: default-currency
          columnName: default_currency
          dataType: string
          nullable: true
        - columnId: default-source
          columnName: default_source
          dataType: string
          nullable: true
        - columnId: delinquent
          columnName: delinquent
          dataType: boolean
          nullable: true
        - columnId: description
          columnName: description
          dataType: string
          nullable: true
        - columnId: discount
          columnName: discount
          dataType: string
          nullable: true
        - columnId: invoice-prefix
          columnName: invoice_prefix
          dataType: string
          nullable: true
        - columnId: livemode
          columnName: livemode
          dataType: boolean
          nullable: true
        - columnId: metadata
          columnName: metadata
          dataType: string
          nullable: true
        - columnId: name
          columnName: name
          dataType: string
          nullable: true
        - columnId: next-invoice-sequence
          columnName: next_invoice_sequence
          dataType: int64
          nullable: true
        - columnId: preferred-locales
          columnName: preferred_locales
          dataType: string
          nullable: true
        - columnId: shipping
          columnName: shipping
          dataType: string
          nullable: true
        - columnId: tax-exempt
          columnName: tax_exempt
          dataType: string
          nullable: true
        - columnId: test-clock
          columnName: test_clock
          dataType: int64
          nullable: true
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: subscriptions-trigger
    spec:
      tableName: stripe-subscriptions-trigger
      columnDescriptors:
        - columnId: trigger
          columnName: Trigger
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Import Stripe Subscriptions\",\n  \"theme\": \"blue\"\n}\n"
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: stripe-subscriptions
    spec:
      tableName: stripe-subscriptions
      columnDescriptors:
        - columnId: id
          columnName: id
          dataType: string
          nullable: true
        - columnId: status
          columnName: status
          dataType: string
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"select\",\n  \"options\": [\n    {\n      \"value\": \"incomplete_expired\",\n      \"theme\": \"ruby\"\n    },\n    {\n      \"value\": \"incomplete\",\n      \"theme\": \"ruby\"\n    },                \n    {\n      \"value\": \"cancelled\",\n      \"theme\": \"ruby\"\n    },     \n    {\n      \"value\": \"unpaid\",\n      \"theme\": \"ruby\"\n    },                                                \n    {\n      \"value\": \"trialing\",\n      \"theme\": \"pink\"\n    },\n    {\n      \"value\": \"past_due\",\n      \"theme\": \"yellow\"\n    },                \n    {\n      \"value\": \"active\",\n      \"theme\": \"green\"\n    }\n  ]\n}\n"
        - columnId: created
          columnName: created
          dataType: int64
          nullable: true
        - columnId: cancel-at-period-end
          columnName: cancel_at_period_end
          dataType: boolean
          nullable: true
        - columnId: canceled-at
          columnName: canceled_at
          dataType: int64
          nullable: true
        - columnId: current-period-end
          columnName: current_period_end
          dataType: int64
          nullable: true
        - columnId: current-period-start
          columnName: current_period_start
          dataType: int64
          nullable: true
        - columnId: customer
          columnName: customer
          dataType: string
          nullable: true
        - columnId: default-payment-method
          columnName: default_payment_method
          dataType: string
          nullable: true
        - columnId: description
          columnName: description
          dataType: string
          nullable: true
        - columnId: items
          columnName: items
          dataType: string
          nullable: true
        - columnId: latest-invoice
          columnName: latest_invoice
          dataType: string
          nullable: true
        - columnId: metadata
          columnName: metadata
          dataType: string
          nullable: true
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: paymentintents-trigger
    spec:
      tableName: stripe-payment-intents-trigger
      columnDescriptors:
        - columnId: trigger
          columnName: Trigger
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Import Stripe Payment Intents\",\n  \"theme\": \"blue\"\n}\n"
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: stripe-payment-intents
    spec:
      tableName: stripe-payment-intents
      columnDescriptors:
        - columnId: id
          columnName: id
          dataType: string
          nullable: true
        - columnId: amount
          columnName: amount
          dataType: float64
          nullable: true
        - columnId: automatic-payment-methods
          columnName: automatic_payment_methods
          dataType: string
          nullable: true
        - columnId: charges
          columnName: charges
          dataType: string
          nullable: true
        - columnId: client-secret
          columnName: client_secret
          dataType: string
          nullable: true
        - columnId: currency
          columnName: currency
          dataType: string
          nullable: true
        - columnId: customer
          columnName: customer
          dataType: string
          nullable: true
        - columnId: description
          columnName: description
          dataType: string
          nullable: true
        - columnId: last-payment-error
          columnName: last_payment_error
          dataType: string
          nullable: true
        - columnId: metadata
          columnName: metadata
          dataType: string
          nullable: true
        - columnId: next-action
          columnName: next_action
          dataType: string
          nullable: true
        - columnId: payment-method
          columnName: payment_method
          dataType: string
          nullable: true
        - columnId: payment-method-types
          columnName: payment_method_types
          dataType: string
          nullable: true
        - columnId: receipt-email
          columnName: receipt_email
          dataType: string
          nullable: true
        - columnId: setup-future-usage
          columnName: setup_future_usage
          dataType: string
          nullable: true
        - columnId: shipping
          columnName: shipping
          dataType: string
          nullable: true
        - columnId: statement-descriptor
          columnName: statement_descriptor
          dataType: string
          nullable: true
        - columnId: statement-descriptor-suffix
          columnName: statement_descriptor_suffix
          dataType: string
          nullable: true
        - columnId: status
          columnName: status
          dataType: string
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"select\",\n  \"options\": [\n    {\n      \"value\": \"requires_payment_method\",\n      \"theme\": \"ruby\"\n    },\n    {\n      \"value\": \"requires_confirmation\",\n      \"theme\": \"ruby\"\n    },                \n    {\n      \"value\": \"requires_action\",\n      \"theme\": \"ruby\"\n    },                                                 \n    {\n      \"value\": \"processing\",\n      \"theme\": \"pink\"\n    },\n    {\n      \"value\": \"requires_capture\",\n      \"theme\": \"yellow\"\n    },                \n    {\n      \"value\": \"succeeded\",\n      \"theme\": \"green\"\n    },\n    {\n      \"value\": \"incomplete\",\n      \"theme\": \"silver\"\n    }               \n  ]\n}\n"
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: invoices-trigger
    spec:
      tableName: stripe-invoices-trigger
      columnDescriptors:
        - columnId: trigger
          columnName: Trigger
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Import Stripe Invoices\",\n  \"theme\": \"blue\"\n}\n"
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: stripe-invoices
    spec:
      tableName: stripe-invoices
      columnDescriptors:
        - columnId: id
          columnName: id
          dataType: string
          nullable: true
        - columnId: auto-advance
          columnName: auto_advance
          dataType: string
          nullable: true
        - columnId: charge
          columnName: charge
          dataType: string
          nullable: true
        - columnId: collection-method
          columnName: collection_method
          dataType: string
          nullable: true
        - columnId: currency
          columnName: currency
          dataType: string
          nullable: true
        - columnId: customer
          columnName: customer
          dataType: string
          nullable: true
        - columnId: description
          columnName: description
          dataType: string
          nullable: true
        - columnId: hosted-invoice-url
          columnName: hosted_invoice_url
          dataType: string
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"url\"\n}\n"
        - columnId: lines
          columnName: lines
          dataType: string
          nullable: true
        - columnId: metadata
          columnName: metadata
          dataType: string
          nullable: true
        - columnId: payment-intent
          columnName: payment_intent
          dataType: string
          nullable: true
        - columnId: period-end
          columnName: period_end
          dataType: string
          nullable: true
        - columnId: period-start
          columnName: period_start
          dataType: string
          nullable: true
        - columnId: status
          columnName: status
          dataType: string
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"select\",\n  \"options\": [\n    {\n      \"value\": \"draft\",\n      \"theme\": \"silver\"\n    },\n    {\n      \"value\": \"open\",\n      \"theme\": \"ruby\"\n    },\n    {\n      \"value\": \"paid\",\n      \"theme\": \"green\"\n    },\n    {\n      \"value\": \"uncollectible\",\n      \"theme\": \"yellow\"\n    },\n    {\n      \"value\": \"voided\",\n      \"theme\": \"silver\"\n    }\n  ]\n}\n"
        - columnId: subscription
          columnName: subscription
          dataType: string
          nullable: true
        - columnId: total
          columnName: total
          dataType: float64
          nullable: true
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: refunds-trigger
    spec:
      tableName: stripe-refunds-trigger
      columnDescriptors:
        - columnId: trigger
          columnName: Trigger
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Import Stripe Refunds\",\n  \"theme\": \"blue\"\n}\n"
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: stripe-refunds
    spec:
      tableName: stripe-refunds
      columnDescriptors:
        - columnId: id
          columnName: id
          dataType: string
          nullable: true
        - columnId: amount
          columnName: amount
          dataType: float64
          nullable: true
        - columnId: charge
          columnName: charge
          dataType: string
          nullable: true
        - columnId: currency
          columnName: currency
          dataType: string
          nullable: true
        - columnId: description
          columnName: description
          dataType: string
          nullable: true
        - columnId: metadata
          columnName: metadata
          dataType: string
          nullable: true
        - columnId: payment-intent
          columnName: payment_intent
          dataType: string
          nullable: true
        - columnId: reason
          columnName: reason
          dataType: string
          nullable: true
        - columnId: status
          columnName: status
          dataType: string
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"select\",\n  \"options\": [\n    {\n      \"value\": \"pending\",\n      \"theme\": \"silver\"\n    },\n    {\n      \"value\": \"succeeded\",\n      \"theme\": \"green\"\n    },\n    {\n      \"value\": \"failed\",\n      \"theme\": \"ruby\"\n    }\n  ]\n}\n"
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: stripe-subscription-items
    spec:
      tableName: stripe-subscription-items
      columnDescriptors:
        - columnId: id
          columnName: id
          dataType: string
          nullable: true
        - columnId: metadata
          columnName: metadata
          dataType: string
          nullable: true
        - columnId: price
          columnName: price
          dataType: string
          nullable: true
        - columnId: quantity
          columnName: quantity
          dataType: int32
          nullable: true
        - columnId: subscription
          columnName: subscription
          dataType: string
          nullable: true
        - columnId: customer
          columnName: customer
          dataType: string
          nullable: true
        - columnId: increment
          columnName: Increment quantity
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Increment\",\n  \"theme\": \"blue\"\n}\n"
        - columnId: decrement
          columnName: Decrement quantity
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Decrement\",\n  \"theme\": \"red\"\n}\n"
        - columnId: processed-at
          columnName: Processed at
          dataType: string
          nullable: true
      tableAnnotations: {}
      autoMigrate: true
parameterizedResources:
  - resource:
      apiVersion: v1
      kind: Secret
      metadata:
        name: stripe-api-key
      type: Opaque
      immutable: false
      stringData:
        parameterValue: ""
    parameters:
      - parameterId: stripe-api-key
        replacePath: /stringData/parameterValue
