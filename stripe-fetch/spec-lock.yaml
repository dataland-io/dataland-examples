# This file was automatically generated by the Dataland CLI via `dataland spec build`.
# It is not intended for manual editing.
moduleId: stripe-fetch-example
resources:
  - apiVersion: dataland.io/v1alpha1
    kind: Worker
    metadata:
      name: stripe-fetch
    spec:
      scriptSha256Hex: fdc98c2a818dcdfd2a779f36cba99e7a7d849c775f2f6083547e9ce395a5c299
      env:
        - name: STRIPE_API_KEY
          value:
            secretKeyRef:
              name: stripe-api-key
              key: parameterValue
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: trigger
    spec:
      tableName: Import Trigger
      columnDescriptors:
        - columnId: trigger
          columnName: Trigger
          dataType: int32
          nullable: true
          columnAnnotations:
            dataland.io/column-display-config: "{\n  \"type\": \"button\",\n  \"label\": \"Import Stripe Customers\",\n  \"theme\": \"blue\"\n}\n"
        - columnId: last-pressed
          columnName: Last pressed
          dataType: string
          nullable: true
      tableAnnotations: {}
      autoMigrate: true
  - apiVersion: dataland.io/v1alpha1
    kind: Table
    metadata:
      name: stripe-customers
    spec:
      tableName: stripe-customers
      columnDescriptors:
        - columnId: stripe-customer-id
          columnName: stripe_customer_id
          dataType: string
          nullable: true
        - columnId: email
          columnName: email
          dataType: string
          nullable: true
        - columnId: stripe-subscription-id
          columnName: stripe_subscription_id
          dataType: string
          nullable: true
        - columnId: sub-status
          columnName: sub_status
          dataType: string
          nullable: true
        - columnId: latest-invoice-id
          columnName: latest_invoice_id
          dataType: string
          nullable: true
      tableAnnotations: {}
      autoMigrate: true
parameterizedResources:
  - resource:
      apiVersion: v1
      kind: Secret
      metadata:
        name: stripe-api-key
      type: Opaque
      immutable: false
      stringData:
        parameterValue: ""
    parameters:
      - parameterId: stripe-api-key
        replacePath: /stringData/parameterValue
