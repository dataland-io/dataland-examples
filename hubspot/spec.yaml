moduleId: hubspot-example

buildCommand: npm run build

parameters:
  - hubspot-access-token

tables:
  - tableId: hubspot-contacts-trigger
    tableName: "hubspot-contacts-trigger"
    autoMigrate: true
    columnDescriptors:
      - columnId: "trigger"
        columnName: "Trigger"
        dataType: int32
        columnAnnotations:
          dataland.io/column-display-config: |
            {
              "type": "button",
              "label": "Trigger contacts sync",
              "theme": "blue"
            }

      - columnId: "last-pressed"
        columnName: "Last pressed"
        dataType: string

  - tableId: hubspot-contacts
    tableName: hubspot-contacts
    autoMigrate: true
    columnDescriptors:
      - columnId: id
        columnName: id
        dataType: int64
      - columnId: "email"
        columnName: "email"
        dataType: string
      - columnId: "firstname"
        columnName: "firstname"
        dataType: string
      - columnId: "lastname"
        columnName: "lastname"
        dataType: string
      - columnId: "createdate"
        columnName: "createdate"
        dataType: string
      - columnId: "lastmodifieddate"
        columnName: "lastmodifieddate"
        dataType: stringotContact.createdAt,
      - columnId: "created-at"
        columnName: "createdAt"
        dataType: stringotContact.updatedAt,
      - columnId: "updated-at"
        columnName: "updatedAt"
        dataType: stringtContact.archived,
      - columnId: "archived"
        columnName: "archived"
        dataType: boolean

  - tableId: hubspot-companies-trigger
    tableName: "hubspot-companies-trigger"
    autoMigrate: true
    columnDescriptors:
      - columnId: "trigger"
        columnName: "Trigger"
        dataType: int32
        columnAnnotations:
          dataland.io/column-display-config: |
            {
              "type": "button",
              "label": "Trigger companies sync",
              "theme": "blue"
            }

      - columnId: "last-pressed"
        columnName: "Last pressed"
        dataType: string

  - tableId: hubspot-companies
    tableName: hubspot-companies
    autoMigrate: true
    columnDescriptors:
      - columnId: id
        columnName: id
        dataType: int64
      - columnId: "name"
        columnName: "name"
        dataType: string
      - columnId: "domain"
        columnName: "domain"
        dataType: string
      - columnId: "hs-lastmodifieddate"
        columnName: "hs_lastmodifieddate"
        dataType: stringotContact.createdate,
      - columnId: "createdate"
        columnName: "createdate"
        dataType: string
      - columnId: "created-at"
        columnName: "createdAt"
        dataType: string
      - columnId: "updated-at"
        columnName: "updatedAt"
        dataType: string
      - columnId: "archived"
        columnName: "archived"
        dataType: boolean

  - tableId: hubspot-deals-trigger
    tableName: "hubspot-deals-trigger"
    autoMigrate: true
    columnDescriptors:
      - columnId: "trigger"
        columnName: "Trigger"
        dataType: int32
        columnAnnotations:
          dataland.io/column-display-config: |
            {
              "type": "button",
              "label": "Trigger deals sync",
              "theme": "blue"
            }

      - columnId: "last-pressed"
        columnName: "Last pressed"
        dataType: string

  - tableId: hubspot-deals
    tableName: hubspot-deals
    autoMigrate: true
    columnDescriptors:
      - columnId: id
        columnName: id
        dataType: int64
      - columnId: "dealname"
        columnName: "dealname"
        dataType: string
      - columnId: "pipeline"
        columnName: "pipeline"
        dataType: string
      - columnId: "dealstage"
        columnName: "dealstage"
        dataType: string
      - columnId: "amount"
        columnName: "amount"
        dataType: float64
      - columnId: "closedate"
        columnName: "closedate"
        dataType: string
      - columnId: "hs-lastmodifieddate"
        columnName: "hs_lastmodifieddate"
        dataType: string
      - columnId: "createdate"
        columnName: "createdate"
        dataType: string
      - columnId: "created-at"
        columnName: "createdAt"
        dataType: string
      - columnId: "updated-at"
        columnName: "updatedAt"
        dataType: string
      - columnId: "archived"
        columnName: "archived"
        dataType: boolean

workers:
  - workerId: hubspot-contacts-worker
    scriptPath: dist/fetchHubspotContacts.bundle.js
    env:
      HUBSPOT_ACCESS_TOKEN: hubspot-access-token

  - workerId: hubspot-companies-worker
    scriptPath: dist/fetchHubspotCompanies.bundle.js
    env:
      HUBSPOT_ACCESS_TOKEN: hubspot-access-token

  - workerId: hubspot-deals-worker
    scriptPath: dist/fetchHubspotDeals.bundle.js
    env:
      HUBSPOT_ACCESS_TOKEN: hubspot-access-token
